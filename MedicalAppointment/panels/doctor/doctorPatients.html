<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-RTL">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacientes - Doctor's Dashboard</title>
    <link rel="stylesheet" href="../../css/doctorStyle.css">
    <link rel="stylesheet" href="../../css/mainStyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Page-specific spacing improvements for doctorPatients */
        /* Make the card container use full available width so the table can expand */
        #patient-list-page .patient-list-container {
            padding: 28px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Ensure the card itself stretches to container width */
        #patient-list-page .patient-list-container.card {
            width: 100%;
            max-width: none;
        }

        .header-actions { gap: 14px; }

        .filter-tabs { gap: 12px; margin-bottom: 18px; }
        .filter-tabs button { padding: 10px 16px; border-radius: 8px; }

        .patient-table { width: 100%; table-layout: auto; border-collapse: collapse; }
        .patient-table th { text-align: left; padding: 14px 18px; color: #444; }
        .patient-table td { padding: 16px 18px; vertical-align: middle; word-break: break-word; }

        /* More breathing room between rows */
        .patient-table tbody tr { border-bottom: 1px solid #eef2f5; }
        .patient-table tbody tr td { height: 56px; }

        /* Make actions column buttons align vertically but not push table width */
        .patient-table td.actions-col { white-space: nowrap; width: 1%; }
        .patient-table th.actions-col { width: 1%; }

        .patient-profile { display:flex; gap:20px; align-items:center; }
        .patient-avatar { width:96px; height:96px; border-radius:8px; object-fit:cover; }

        .patient-overview .card { margin-bottom: 20px; }

        .form-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .form-group { margin-bottom: 12px; }
        .form-group.large-field { grid-column: span 3; }

        /* Responsive adjustments */
        @media (max-width: 1000px) {
            .form-grid { grid-template-columns: 1fr; }
            .patient-profile { flex-direction: column; align-items:flex-start; }
            .patient-table td, .patient-table th { padding: 12px; }
        }
    </style>
</head>

<body>
    <div class="container">

        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="../../sources/img/logo.png" alt="Clínica San Miguel Logo">
                </div>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="./doctorHome.html"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="./doctorAppointmentSchedule.html"><i class="fas fa-calendar-check"></i> Agendar Cita</a></li>
                    <li><a href="./doctorSchedule.html"><i class="fas fa-calendar-alt"></i> Mi Agenda</a></li>
                    <li class="active"><a href="./doctorPatients.html"><i class="fas fa-users"></i> Pacientes</a></li>
                    <li><a href="./doctorPrescription.html"><i class="fas fa-file-medical"></i> Generar Receta</a></li>
                    <li><a href="./doctorReports.html"><i class="fas fa-chart-line"></i> Reportes</a></li>
                    <li><a href="./doctorMessages.html"><i class="fas fa-envelope"></i> Mensajes</a></li>
                    <li><a href="./doctorPerfil.html"><i class="fas fa-user-cog"></i>Perfil</a></li>
                    <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Cerrar
                            Sesion</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content" id="patient-list-page">
            <header class="main-header">
                <h1>Mis Pacientes</h1>
                <div class="header-actions">
                    <input type="search" placeholder="Buscar paciente por nombre o cédula..." class="search-bar">
                    <button class="btn-primary"><i class="fas fa-plus"></i> Nuevo Paciente</button>
                </div>
            </header>

            <section class="patient-list-container card">
                

                <table class="patient-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Cédula</th>
                            <th>Última Visita</th>
                            <th>Condición Principal</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="patient-table-body">
                    </tbody>
                </table>
            </section>
        </main>

        <main class="main-content" id="appointment-details-page" style="display: none;">
            <header class="appointment-header">
                <div class="header-left">
                    <button class="btn-back" id="btn-back-to-list"><i class="fas fa-arrow-left"></i> Volver a la
                        lista</button>
                    <h1>Detalles del Paciente</h1>
                    <p id="detail-header-info">Paciente: Nombre - Motivo</p>
                </div>
            </header>

            <section class="patient-overview">
                <div class="card patient-info-card">
                    <h2>Información del Paciente</h2>
                    <div class="patient-profile">
                        <img src="../../sources/img/patient.jpg" alt="Patient Avatar" class="patient-avatar"
                            id="detail-patient-avatar">
                        <div class="patient-details">
                            <h3 id="detail-patient-name">Nombre del Paciente</h3>
                            <p><strong>Edad:</strong> <span id="detail-patient-age">0</span> años</p>
                            <p><strong>Contacto:</strong> <span id="detail-patient-contact"></span></p>
                            <p><strong>Cédula:</strong> <span id="detail-patient-id"></span></p>
                            <p><strong>Alergias:</strong> <span id="detail-patient-allergies"></span></p>
                            <p><strong>Condiciones Previas:</strong> <span id="detail-patient-conditions"></span></p>
                            <p><strong>Última Cita:</strong> <span id="detail-patient-last-visit"></span></p>
                        </div>
                    </div>
                </div>

                <div class="card appointment-details-card">
                    <h2>Información de la Cita</h2>
                    <p><strong>Fecha:</strong> Martes, 18 de Julio de 2024</p>
                    <p><strong>Hora:</strong> 09:00 AM - 09:45 AM</p>
                    <p><strong>Tipo de Consulta:</strong> Revisión General</p>
                    <p><strong>Estado:</strong> Concluida</p>
                </div>
            </section>

            <section class="patient-record-details">
                <div class="card previous-consultations-card">
                    <h2>Consultas Anteriores</h2>
                    <div id="detail-consultations">
                    </div>
                </div>
                <div class="card test-results-card">
                    <h2>Resultados de Exámenes</h2>
                    <div id="detail-tests">
                    </div>
                </div>
                <div class="card prescriptions-card">
                    <h2>Prescripciones</h2>
                    <div id="detail-prescriptions">
                    </div>
                </div>
            </section>
        </main>

        <main class="main-content" id="new-patient-form-page" style="display: none;">
            <header class="main-header">
                <div class="header-left">
                    <button class="btn-back" id="btn-back-to-list-from-form"><i class="fas fa-arrow-left"></i> Volver a
                        la lista</button>
                    <h1>Registrar Nuevo Paciente</h1>
                </div>
            </header>

            <section class="card form-container-card">
                <form id="new-patient-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="new-patient-name">Nombre Completo</label>
                            <input type="text" id="new-patient-name" required>
                        </div>
                        <div class="form-group">
                            <label for="new-patient-email">Email</label>
                            <input type="email" id="new-patient-email" required>
                        </div>
                        <div class="form-group">
                            <label for="new-patient-password">Contraseña</label>
                            <input type="password" id="new-patient-password" required>
                        </div>
                        <div class="form-group">
                            <label for="new-patient-cedula">Cédula</label>
                            <input type="text" id="new-patient-cedula" required>
                        </div>
                        <div class="form-group">
                            <label for="new-patient-contact">Teléfono</label>
                            <input type="tel" id="new-patient-contact">
                        </div>
                        <div class="form-group">
                            <label for="new-patient-date-of-birth">Fecha de Nacimiento</label>
                            <input type="date" id="new-patient-date-of-birth">
                        </div>
                        <div class="form-group large-field">
                            <label for="new-patient-allergies">Alergias Conocidas</label>
                            <input type="text" id="new-patient-allergies" placeholder="Ej: Penicilina, Mariscos...">
                        </div>
                        <div class="form-group large-field">
                            <label for="new-patient-conditions">Condición Principal / Motivo</label>
                            <input type="text" id="new-patient-conditions"
                                placeholder="Ej: Hipertensión, Control Pediátrico...">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Guardar Paciente</button>
                    </div>
                </form>
            </section>
        </main>

    </div>
    <script src="../../js/doctorPatients.js"></script>
    <script>
        function logout() {
            if (confirm('¿Estás seguro de que deseas cerrar sesión?')) {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = '../../panels/login.html';
            }
        }
    </script>
</body>

</html>